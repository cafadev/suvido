on:
  push:
    branches:
      - main

name: ðŸš€ Deploy project on server
jobs:
  # build-docker-image:
  #   name: ðŸŽ‰ Building docker image
  #   runs-on: ubuntu-latest
  #   steps:
  #   - name: ðŸšš Get latest code
  #     uses: actions/checkout@v2
    
  #   - name: Copying .env file for production
  #     run: cp .env.prod .env

  #   - name: Build docker
  #     run: docker-compose build

  deploy-application:
    # needs: build-docker-image
    runs-on: self-hosted

    name: ðŸŽ‰ Deploying into server
    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout@v2
    
    - name: Copying .env file for production
      run: cp .env.prod .env

    - name: Build docker
      run: docker-compose up --build -d

